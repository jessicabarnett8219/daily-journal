(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
const apiHandler = {
  saveNewEntry: function (object) {
    return fetch("http://localhost:8088/entries/", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(object)
    });
  },
  loadExistingEntries: function () {
    return fetch("http://localhost:8088/entries?_expand=mood&_expand=instructor").then(entries => entries.json());
  },
  loadMoodCollection: function () {
    return fetch("http://localhost:8088/moods/").then(collection => collection.json()).then(collection => collection);
  },
  loadInstructorCollection: function () {
    return fetch("http://localhost:8088/instructors/").then(collection => collection.json()).then(collection => collection);
  }
};
var _default = apiHandler;
exports.default = _default;

},{}],2:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _entryComponent = _interopRequireDefault(require("./entryComponent"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

let entryLog = document.querySelector(".entryLog"); // function to loop over the entries array and add to DOM

const addEntriesToDOM = entries => {
  let fragment = document.createDocumentFragment();
  entries.forEach(entry => {
    let entryComponent = (0, _entryComponent.default)(entry);
    fragment.appendChild(entryComponent);
  });
  entryLog.appendChild(fragment);
};

var _default = addEntriesToDOM;
exports.default = _default;

},{"./entryComponent":3}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

// function to make HTML component
const makeEntryComponent = journalObject => {
  let entryComponent = document.createElement("section");
  entryComponent.className = "entry";
  let currentConcept = document.createElement("h2");
  currentConcept.textContent = journalObject.concept;
  entryComponent.appendChild(currentConcept);
  let currentDate = document.createElement("h3");
  currentDate.textContent = journalObject.date;
  entryComponent.appendChild(currentDate);
  let currentEntry = document.createElement("p");
  currentEntry.textContent = journalObject.entry;
  entryComponent.appendChild(currentEntry);
  let currentMood = document.createElement("p");
  currentMood.textContent = `Mood: ${journalObject.mood.label}`;
  entryComponent.appendChild(currentMood);
  let currentInstructor = document.createElement("p");
  currentInstructor.textContent = `Instructor: ${journalObject.instructor.firstName} ${journalObject.instructor.lastName}`;
  entryComponent.appendChild(currentInstructor);
  return entryComponent;
};

var _default = makeEntryComponent;
exports.default = _default;

},{}],4:[function(require,module,exports){
"use strict";

var _entriesDOM = _interopRequireDefault(require("./entriesDOM"));

var _data = _interopRequireDefault(require("./data"));

var _options = _interopRequireDefault(require("./options"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

_data.default.loadExistingEntries().then(entries => (0, _entriesDOM.default)(entries));

const submitBtn = document.querySelector("#submitBtn");
submitBtn.addEventListener("click", event => {
  let dateInput = document.querySelector("#dateInput");
  let conceptInput = document.querySelector("#conceptInput");
  let entryTextInput = document.querySelector("#entryTextInput");
  let moodInput = document.querySelector("#moodInput");
  let instructorInput = document.querySelector("#instructorInput");
  const journalEntryObject = {
    date: dateInput.value,
    concept: conceptInput.value,
    entry: entryTextInput.value,
    moodId: moodInput.options[moodInput.selectedIndex].value,
    instructorId: instructorInput.options[instructorInput.selectedIndex].value
  };
  console.log(journalEntryObject);
  $(".entryLog").empty();

  _data.default.saveNewEntry(journalEntryObject).then(data => _data.default.loadExistingEntries(data)).then(entries => (0, _entriesDOM.default)(entries));

  dateInput.value = "";
  conceptInput.value = "";
  entryTextInput.value = "";
  moodInput.selectedIndex = 0;
});
const radioBtns = document.getElementsByName("mood");
radioBtns.forEach(radioBtn => {
  radioBtn.addEventListener("click", event => {
    $(".entryLog").empty();
    let currentMood = event.target.value;

    _data.default.loadExistingEntries().then(entries => {
      return entries.filter(entry => {
        return entry.mood === currentMood;
      });
    }).then(returns => {
      (0, _entriesDOM.default)(returns);
    });
  });
}); // let moodSelectMenu = document.querySelector("#moodInput")

_data.default.loadMoodCollection().then(collection => {
  collection.forEach(obj => {
    let newMoodOption = (0, _options.default)(obj.id, obj.label);
    moodInput.appendChild(newMoodOption);
  });
}); // let instructorSelectMenu = document.querySelector("#instructorInput")


_data.default.loadInstructorCollection().then(collection => {
  collection.forEach(obj => {
    let newInstOption = (0, _options.default)(obj.id, `${obj.firstName} ${obj.lastName}`);
    instructorInput.appendChild(newInstOption);
  });
});

},{"./data":1,"./entriesDOM":2,"./options":5}],5:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

const optionMaker = (objId, objLabel) => {
  let newOption = document.createElement("option");
  newOption.setAttribute("value", objId);
  newOption.innerHTML = objLabel;
  return newOption;
};

var _default = optionMaker;
exports.default = _default;

},{}]},{},[4])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIuLi9zY3JpcHRzL2RhdGEuanMiLCIuLi9zY3JpcHRzL2VudHJpZXNET00uanMiLCIuLi9zY3JpcHRzL2VudHJ5Q29tcG9uZW50LmpzIiwiLi4vc2NyaXB0cy9tYWluLmpzIiwiLi4vc2NyaXB0cy9vcHRpb25zLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7O0FDQUEsTUFBTSxVQUFVLEdBQUc7QUFDakIsRUFBQSxZQUFZLEVBQUUsVUFBVSxNQUFWLEVBQWtCO0FBQzlCLFdBQU8sS0FBSyxDQUFDLGdDQUFELEVBQW1DO0FBQy9DLE1BQUEsTUFBTSxFQUFFLE1BRHVDO0FBRS9DLE1BQUEsT0FBTyxFQUFFO0FBQ0wsd0JBQWdCO0FBRFgsT0FGc0M7QUFLL0MsTUFBQSxJQUFJLEVBQUUsSUFBSSxDQUFDLFNBQUwsQ0FBZSxNQUFmO0FBTHlDLEtBQW5DLENBQVo7QUFPRCxHQVRnQjtBQVVqQixFQUFBLG1CQUFtQixFQUFFLFlBQVk7QUFDL0IsV0FBTyxLQUFLLENBQUMsK0RBQUQsQ0FBTCxDQUNOLElBRE0sQ0FDRCxPQUFPLElBQUksT0FBTyxDQUFDLElBQVIsRUFEVixDQUFQO0FBRUQsR0FiZ0I7QUFjakIsRUFBQSxrQkFBa0IsRUFBRSxZQUFZO0FBQzlCLFdBQU8sS0FBSyxDQUFDLDhCQUFELENBQUwsQ0FDTixJQURNLENBQ0QsVUFBVSxJQUFJLFVBQVUsQ0FBQyxJQUFYLEVBRGIsRUFFTixJQUZNLENBRUQsVUFBVSxJQUFJLFVBRmIsQ0FBUDtBQUdELEdBbEJnQjtBQW1CakIsRUFBQSx3QkFBd0IsRUFBRSxZQUFZO0FBQ3BDLFdBQU8sS0FBSyxDQUFDLG9DQUFELENBQUwsQ0FDTixJQURNLENBQ0QsVUFBVSxJQUFJLFVBQVUsQ0FBQyxJQUFYLEVBRGIsRUFFTixJQUZNLENBRUQsVUFBVSxJQUFJLFVBRmIsQ0FBUDtBQUdEO0FBdkJnQixDQUFuQjtlQTBCZSxVOzs7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QUssQ0FBQyxJQUFOLEtBQWUsV0FBdEI7QUFDRCxPQUZNLENBQVA7QUFHRCxLQUxILEVBTUcsSUFOSCxDQU1RLE9BQU8sSUFBSTtBQUNmLCtCQUFnQixPQUFoQjtBQUNELEtBUkg7QUFTRCxHQVpEO0FBYUQsQ0FkRCxFLENBZ0JBOztBQUNBLGNBQVcsa0JBQVgsR0FDQyxJQURELENBQ00sVUFBVSxJQUFJO0FBQ2xCLEVBQUEsVUFBVSxDQUFDLE9BQVgsQ0FBbUIsR0FBRyxJQUFJO0FBQ3hCLFFBQUksYUFBYSxHQUFHLHNCQUFZLEdBQUcsQ0FBQyxFQUFoQixFQUFvQixHQUFHLENBQUMsS0FBeEIsQ0FBcEI7QUFDQSxJQUFBLFNBQVMsQ0FBQyxXQUFWLENBQXNCLGFBQXRCO0FBQ0QsR0FIRDtBQUlELENBTkQsRSxDQVFBOzs7QUFDQSxjQUFXLHdCQUFYLEdBQ0MsSUFERCxDQUNPLFVBQVUsSUFBSTtBQUNuQixFQUFBLFVBQVUsQ0FBQyxPQUFYLENBQW1CLEdBQUcsSUFBSTtBQUN4QixRQUFJLGFBQWEsR0FBRyxzQkFBWSxHQUFHLENBQUMsRUFBaEIsRUFBcUIsR0FBRSxHQUFHLENBQUMsU0FBVSxJQUFHLEdBQUcsQ0FBQyxRQUFTLEVBQXJELENBQXBCO0FBQ0EsSUFBQSxlQUFlLENBQUMsV0FBaEIsQ0FBNEIsYUFBNUI7QUFDRCxHQUhEO0FBS0QsQ0FQRDs7Ozs7Ozs7OztBQ3BFQSxNQUFNLFdBQVcsR0FBRyxDQUFDLEtBQUQsRUFBUSxRQUFSLEtBQXFCO0FBQ3ZDLE1BQUksU0FBUyxHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLFFBQXZCLENBQWhCO0FBQ0EsRUFBQSxTQUFTLENBQUMsWUFBVixDQUF1QixPQUF2QixFQUFnQyxLQUFoQztBQUNBLEVBQUEsU0FBUyxDQUFDLFNBQVYsR0FBc0IsUUFBdEI7QUFDQSxTQUFPLFNBQVA7QUFDRCxDQUxEOztlQU9lLFciLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJjb25zdCBhcGlIYW5kbGVyID0ge1xuICBzYXZlTmV3RW50cnk6IGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgICByZXR1cm4gZmV0Y2goXCJodHRwOi8vbG9jYWxob3N0OjgwODgvZW50cmllcy9cIiwge1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgaGVhZGVyczoge1xuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgIH0sXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkob2JqZWN0KVxuICAgIH0pXG4gIH0sXG4gIGxvYWRFeGlzdGluZ0VudHJpZXM6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZmV0Y2goXCJodHRwOi8vbG9jYWxob3N0OjgwODgvZW50cmllcz9fZXhwYW5kPW1vb2QmX2V4cGFuZD1pbnN0cnVjdG9yXCIpXG4gICAgLnRoZW4oZW50cmllcyA9PiBlbnRyaWVzLmpzb24oKSlcbiAgfSxcbiAgbG9hZE1vb2RDb2xsZWN0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZldGNoKFwiaHR0cDovL2xvY2FsaG9zdDo4MDg4L21vb2RzL1wiKVxuICAgIC50aGVuKGNvbGxlY3Rpb24gPT4gY29sbGVjdGlvbi5qc29uKCkpXG4gICAgLnRoZW4oY29sbGVjdGlvbiA9PiBjb2xsZWN0aW9uKVxuICB9LFxuICBsb2FkSW5zdHJ1Y3RvckNvbGxlY3Rpb246IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZmV0Y2goXCJodHRwOi8vbG9jYWxob3N0OjgwODgvaW5zdHJ1Y3RvcnMvXCIpXG4gICAgLnRoZW4oY29sbGVjdGlvbiA9PiBjb2xsZWN0aW9uLmpzb24oKSlcbiAgICAudGhlbihjb2xsZWN0aW9uID0+IGNvbGxlY3Rpb24pXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgYXBpSGFuZGxlclxuXG5cblxuXG5cblxuXG5cbiIsImltcG9ydCBtYWtlRW50cnlDb21wb25lbnQgZnJvbSBcIi4vZW50cnlDb21wb25lbnRcIlxubGV0IGVudHJ5TG9nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbnRyeUxvZ1wiKVxuLy8gZnVuY3Rpb24gdG8gbG9vcCBvdmVyIHRoZSBlbnRyaWVzIGFycmF5IGFuZCBhZGQgdG8gRE9NXG5jb25zdCBhZGRFbnRyaWVzVG9ET00gPSAoZW50cmllcykgPT4ge1xuICBsZXQgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KClcbiAgZW50cmllcy5mb3JFYWNoKGVudHJ5ID0+IHtcbiAgICBsZXQgZW50cnlDb21wb25lbnQgPSBtYWtlRW50cnlDb21wb25lbnQoZW50cnkpXG4gICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoZW50cnlDb21wb25lbnQpXG4gIH0pXG4gIGVudHJ5TG9nLmFwcGVuZENoaWxkKGZyYWdtZW50KVxufVxuXG5leHBvcnQgZGVmYXVsdCBhZGRFbnRyaWVzVG9ET01cblxuIiwiLy8gZnVuY3Rpb24gdG8gbWFrZSBIVE1MIGNvbXBvbmVudFxuXG5jb25zdCBtYWtlRW50cnlDb21wb25lbnQgPSAoam91cm5hbE9iamVjdCkgPT4ge1xuXG4gIGxldCBlbnRyeUNvbXBvbmVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWN0aW9uXCIpXG4gIGVudHJ5Q29tcG9uZW50LmNsYXNzTmFtZSA9IFwiZW50cnlcIlxuXG4gIGxldCBjdXJyZW50Q29uY2VwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMlwiKVxuICBjdXJyZW50Q29uY2VwdC50ZXh0Q29udGVudCA9IGpvdXJuYWxPYmplY3QuY29uY2VwdFxuICBlbnRyeUNvbXBvbmVudC5hcHBlbmRDaGlsZChjdXJyZW50Q29uY2VwdClcblxuICBsZXQgY3VycmVudERhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDNcIilcbiAgY3VycmVudERhdGUudGV4dENvbnRlbnQgPSBqb3VybmFsT2JqZWN0LmRhdGVcbiAgZW50cnlDb21wb25lbnQuYXBwZW5kQ2hpbGQoY3VycmVudERhdGUpXG5cbiAgbGV0IGN1cnJlbnRFbnRyeSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpXG4gIGN1cnJlbnRFbnRyeS50ZXh0Q29udGVudCA9IGpvdXJuYWxPYmplY3QuZW50cnlcbiAgZW50cnlDb21wb25lbnQuYXBwZW5kQ2hpbGQoY3VycmVudEVudHJ5KVxuXG4gIGxldCBjdXJyZW50TW9vZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpXG4gIGN1cnJlbnRNb29kLnRleHRDb250ZW50ID0gYE1vb2Q6ICR7am91cm5hbE9iamVjdC5tb29kLmxhYmVsfWBcbiAgZW50cnlDb21wb25lbnQuYXBwZW5kQ2hpbGQoY3VycmVudE1vb2QpXG5cbiAgbGV0IGN1cnJlbnRJbnN0cnVjdG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIilcbiAgY3VycmVudEluc3RydWN0b3IudGV4dENvbnRlbnQgPSBgSW5zdHJ1Y3RvcjogJHtqb3VybmFsT2JqZWN0Lmluc3RydWN0b3IuZmlyc3ROYW1lfSAke2pvdXJuYWxPYmplY3QuaW5zdHJ1Y3Rvci5sYXN0TmFtZX1gXG4gIGVudHJ5Q29tcG9uZW50LmFwcGVuZENoaWxkKGN1cnJlbnRJbnN0cnVjdG9yKVxuXG4gIHJldHVybiBlbnRyeUNvbXBvbmVudFxuXG4gIH1cblxuICBleHBvcnQgZGVmYXVsdCBtYWtlRW50cnlDb21wb25lbnQiLCJpbXBvcnQgYWRkRW50cmllc1RvRE9NIGZyb20gXCIuL2VudHJpZXNET01cIlxuaW1wb3J0IGFwaUhhbmRsZXIgZnJvbSBcIi4vZGF0YVwiXG5pbXBvcnQgb3B0aW9uTWFrZXIgZnJvbSBcIi4vb3B0aW9uc1wiXG5cblxuYXBpSGFuZGxlci5sb2FkRXhpc3RpbmdFbnRyaWVzKClcbiAgLnRoZW4oZW50cmllcyA9PiBhZGRFbnRyaWVzVG9ET00oZW50cmllcykpXG5cbmNvbnN0IHN1Ym1pdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjc3VibWl0QnRuXCIpXG5cblxuc3VibWl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgbGV0IGRhdGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGF0ZUlucHV0XCIpXG4gIGxldCBjb25jZXB0SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NvbmNlcHRJbnB1dFwiKVxuICBsZXQgZW50cnlUZXh0SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VudHJ5VGV4dElucHV0XCIpXG4gIGxldCBtb29kSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vb2RJbnB1dFwiKVxuICBsZXQgaW5zdHJ1Y3RvcklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbnN0cnVjdG9ySW5wdXRcIilcblxuICBjb25zdCBqb3VybmFsRW50cnlPYmplY3QgPSB7XG4gICAgZGF0ZTogZGF0ZUlucHV0LnZhbHVlLFxuICAgIGNvbmNlcHQ6IGNvbmNlcHRJbnB1dC52YWx1ZSxcbiAgICBlbnRyeTogZW50cnlUZXh0SW5wdXQudmFsdWUsXG4gICAgbW9vZElkOiBtb29kSW5wdXQub3B0aW9uc1ttb29kSW5wdXQuc2VsZWN0ZWRJbmRleF0udmFsdWUsXG4gICAgaW5zdHJ1Y3RvcklkOiBpbnN0cnVjdG9ySW5wdXQub3B0aW9uc1tpbnN0cnVjdG9ySW5wdXQuc2VsZWN0ZWRJbmRleF0udmFsdWVcbiAgfVxuXG4gIGNvbnNvbGUubG9nKGpvdXJuYWxFbnRyeU9iamVjdClcblxuICAkKFwiLmVudHJ5TG9nXCIpLmVtcHR5KClcbiAgYXBpSGFuZGxlci5zYXZlTmV3RW50cnkoam91cm5hbEVudHJ5T2JqZWN0KVxuICAgIC50aGVuKGRhdGEgPT4gYXBpSGFuZGxlci5sb2FkRXhpc3RpbmdFbnRyaWVzKGRhdGEpKVxuICAgIC50aGVuKGVudHJpZXMgPT4gYWRkRW50cmllc1RvRE9NKGVudHJpZXMpKVxuXG4gIGRhdGVJbnB1dC52YWx1ZSA9IFwiXCJcbiAgY29uY2VwdElucHV0LnZhbHVlID0gXCJcIlxuICBlbnRyeVRleHRJbnB1dC52YWx1ZSA9IFwiXCJcbiAgbW9vZElucHV0LnNlbGVjdGVkSW5kZXggPSAwO1xufSlcblxuXG5jb25zdCByYWRpb0J0bnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZShcIm1vb2RcIilcblxucmFkaW9CdG5zLmZvckVhY2gocmFkaW9CdG4gPT4ge1xuICByYWRpb0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XG4gICAgJChcIi5lbnRyeUxvZ1wiKS5lbXB0eSgpXG4gICAgbGV0IGN1cnJlbnRNb29kID0gZXZlbnQudGFyZ2V0LnZhbHVlXG4gICAgYXBpSGFuZGxlci5sb2FkRXhpc3RpbmdFbnRyaWVzKClcbiAgICAgIC50aGVuKGVudHJpZXMgPT4ge1xuICAgICAgICByZXR1cm4gZW50cmllcy5maWx0ZXIoZW50cnkgPT4ge1xuICAgICAgICAgIHJldHVybiBlbnRyeS5tb29kID09PSBjdXJyZW50TW9vZFxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICAgIC50aGVuKHJldHVybnMgPT4ge1xuICAgICAgICBhZGRFbnRyaWVzVG9ET00ocmV0dXJucylcbiAgICAgIH0pXG4gIH0pXG59KVxuXG4vLyBsZXQgbW9vZFNlbGVjdE1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vb2RJbnB1dFwiKVxuYXBpSGFuZGxlci5sb2FkTW9vZENvbGxlY3Rpb24oKVxuLnRoZW4oY29sbGVjdGlvbiA9PiB7XG4gIGNvbGxlY3Rpb24uZm9yRWFjaChvYmogPT4ge1xuICAgIGxldCBuZXdNb29kT3B0aW9uID0gb3B0aW9uTWFrZXIob2JqLmlkLCBvYmoubGFiZWwpXG4gICAgbW9vZElucHV0LmFwcGVuZENoaWxkKG5ld01vb2RPcHRpb24pXG4gIH0pXG59KVxuXG4vLyBsZXQgaW5zdHJ1Y3RvclNlbGVjdE1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2luc3RydWN0b3JJbnB1dFwiKVxuYXBpSGFuZGxlci5sb2FkSW5zdHJ1Y3RvckNvbGxlY3Rpb24oKVxuLnRoZW4oIGNvbGxlY3Rpb24gPT4ge1xuICBjb2xsZWN0aW9uLmZvckVhY2gob2JqID0+IHtcbiAgICBsZXQgbmV3SW5zdE9wdGlvbiA9IG9wdGlvbk1ha2VyKG9iai5pZCwgYCR7b2JqLmZpcnN0TmFtZX0gJHtvYmoubGFzdE5hbWV9YClcbiAgICBpbnN0cnVjdG9ySW5wdXQuYXBwZW5kQ2hpbGQobmV3SW5zdE9wdGlvbilcbiAgfSlcblxufSkiLCJjb25zdCBvcHRpb25NYWtlciA9IChvYmpJZCwgb2JqTGFiZWwpID0+IHtcbiAgbGV0IG5ld09wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIilcbiAgbmV3T3B0aW9uLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIG9iaklkKVxuICBuZXdPcHRpb24uaW5uZXJIVE1MID0gb2JqTGFiZWxcbiAgcmV0dXJuIG5ld09wdGlvblxufVxuXG5leHBvcnQgZGVmYXVsdCBvcHRpb25NYWtlclxuXG4iXX0=
